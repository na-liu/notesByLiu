## TSP问题

### 回顾遗传算法

1. 【编码】算出编码位数并对n个个体进行编码，形成初始种群P(0)
2. 【适应度】计算适应度函数，1/个体的总距离，将值排序
3. 【选择】从初始种群中选择个体作为父代，fit值越高的概率越大，fit值小的选择的概率小。不能只选择fit高的，因为会收敛过快导致早熟。
4. 【交叉】Pc∈[0.6,1.0]的概率有繁殖能力，父代a,b，通过交叉产生子代c,d，代替父代，没有生殖的父代继续保留。随机产生交配点
5. 【变异】Pm≤0.1，随机产生变异点变异

终止进化条件：

1. 计算时间
2. 个体已经是最好的了，即找到最优解
3. 适应度已经饱和了，不会产生更好的个体了
4. 人为干预

### GA在TSP中的应用

1. 【编码】整数编码：TSP问题，如1->4->3->6->5->2->7->1<font color=red>一个个体就是一条完整的路径</font>
   - 近邻表示：code:（4，7，6，3，2，5，1）【第1~7的下一个地点序号】decode:同理
   - 次序表示：code:(1,3,2,3,2,1,1)【一般选择一个参考序列，如(1,...,n)。编码的号码为每一个位在参考序列的次序，并且将每一位编完码从参考序列中删掉，再对下一位进行编码】decode:几乎一致，就是一个反过程，仍然要从参考序列中一个一个删除。
2. 【交叉】
   - 部分匹配交叉，需要进行修正，建立映射关系
   - **顺序交叉，交换后删除中间部分已有的gene，其余的顺序填入**
   - 循环交叉，随机找一点，找到对方的对应点，形成一个环，选择的点交换，其余不变
3. 【变异】
   - **对换变异，在个体上随机找两个位置交换数字**
   - 移位变异，任选一位放到最前面
   - 插入变异，随机找一点，随机找一位，插入
4. 【选择】
   - 精英保留，选fit最高的前几个直接保留到下一代
   - 轮盘赌，按个体适应度比例进行选择，重复只要选择到合适数量的个体
5. <font color=red>局部搜索：</font> 在每个个体（解）的附近小邻域内寻找局部最优解， 若找到，则更新个体

### gr48测试集

下三角矩阵，表示i->j的距离

### TSP解决

<font color=red></font>